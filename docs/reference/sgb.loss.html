<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SGB with user-defined loss function — sgb.loss • ProfitBoost</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="SGB with user-defined loss function — sgb.loss" />
<meta property="og:description" content="SGB with user-defined loss function." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ProfitBoost</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/LemmensGupta2020-replication.html">Replication Code: Managing Churn to Maximize Profits</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/AurelieLemmensRSM/ProfitBoost/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>SGB with user-defined loss function</h1>
    <small class="dont-index">Source: <a href='https://github.com/AurelieLemmensRSM/ProfitBoost/blob/master/R/sgb_user_defined_loss.R'><code>R/sgb_user_defined_loss.R</code></a></small>
    <div class="hidden name"><code>sgb.loss.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>SGB with user-defined loss function.</p>
    </div>

    <pre class="usage"><span class='fu'>sgb.loss</span>(
  <span class='no'>data.train</span>,
  <span class='no'>data.valid</span>,
  <span class='no'>data.test</span>,
  <span class='no'>otherdata1</span>,
  <span class='no'>otherdata2</span>,
  <span class='no'>otherdata3</span>,
  <span class='no'>otherdata4</span>,
  <span class='no'>otherdata5</span>,
  <span class='no'>otherdata6</span>,
  <span class='no'>y.type</span>,
  <span class='no'>pos.y</span>,
  <span class='no'>pos.covariates</span>,
  <span class='no'>pi</span>,
  <span class='no'>pi.valid</span>,
  <span class='no'>loss</span>,
  <span class='no'>reorder</span>,
  <span class='no'>conditional</span>,
  <span class='no'>miniter</span>,
  <span class='no'>maxiter</span>,
  <span class='no'>rho</span>,
  <span class='no'>stoch</span>,
  <span class='no'>ratio</span>,
  <span class='no'>m.convergence.train</span>,
  <span class='no'>m.convergence.valid</span>,
  <span class='no'>m.convergence.test</span>,
  <span class='no'>delta.convergence</span>,
  <span class='no'>increment.convergence</span>,
  <span class='no'>m0.train</span>,
  <span class='no'>m1.train</span>,
  <span class='no'>m0.valid</span>,
  <span class='no'>m1.valid</span>,
  <span class='no'>m0.test</span>,
  <span class='no'>m1.test</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data.train</th>
      <td><p>training data set</p></td>
    </tr>
    <tr>
      <th>data.valid</th>
      <td><p>validation data set</p></td>
    </tr>
    <tr>
      <th>data.test</th>
      <td><p>test data set</p></td>
    </tr>
    <tr>
      <th>otherdata1</th>
      <td><p>other data used for the reordered classic loss, 1</p></td>
    </tr>
    <tr>
      <th>otherdata2</th>
      <td><p>other data used for the reordered classic loss, 2</p></td>
    </tr>
    <tr>
      <th>otherdata3</th>
      <td><p>other data used for the reordered classic loss, 3</p></td>
    </tr>
    <tr>
      <th>otherdata4</th>
      <td><p>other data used for the reordered classic loss, 4</p></td>
    </tr>
    <tr>
      <th>otherdata5</th>
      <td><p>other data used for the reordered classic loss, 5</p></td>
    </tr>
    <tr>
      <th>otherdata6</th>
      <td><p>other data used for the reordered classic loss, 6</p></td>
    </tr>
    <tr>
      <th>y.type</th>
      <td><p>churn variable,  and</p></td>
    </tr>
    <tr>
      <th>pos.y</th>
      <td><p>positions (col) of churn</p></td>
    </tr>
    <tr>
      <th>pos.covariates</th>
      <td><p>covariates</p></td>
    </tr>
    <tr>
      <th>pi</th>
      <td><p>individual expected profit lifts used as DV and weights
in the profit loss function</p></td>
    </tr>
    <tr>
      <th>pi.valid</th>
      <td><p>individual expected profit lifts used as DV and weights
in the profit loss function</p></td>
    </tr>
    <tr>
      <th>loss</th>
      <td><p>specify loss function and type of offer</p></td>
    </tr>
    <tr>
      <th>reorder</th>
      <td><p>whether scores should be reordered</p></td>
    </tr>
    <tr>
      <th>conditional</th>
      <td><p>whether the offer is conditional on renewal</p></td>
    </tr>
    <tr>
      <th>miniter</th>
      <td><p>miniter hyperparameter</p></td>
    </tr>
    <tr>
      <th>maxiter</th>
      <td><p>maxiter hyperparameter</p></td>
    </tr>
    <tr>
      <th>rho</th>
      <td><p>learning rate</p></td>
    </tr>
    <tr>
      <th>stoch</th>
      <td><p>use stochastic GB or regular GB</p></td>
    </tr>
    <tr>
      <th>ratio</th>
      <td><p>fraction of observations to be sampled in case of stochastic GB</p></td>
    </tr>
    <tr>
      <th>m.convergence.train</th>
      <td><p>training scores to determine convergence by
calculating optimal campaign profit at each
iteration</p></td>
    </tr>
    <tr>
      <th>m.convergence.valid</th>
      <td><p>validation scores to determine convergence
by calculating optimal campaign profit at each
iteration</p></td>
    </tr>
    <tr>
      <th>m.convergence.test</th>
      <td><p>test scores to determine convergence by
calculating optimal campaign profit at each
iteration</p></td>
    </tr>
    <tr>
      <th>delta.convergence</th>
      <td><p>intervention cost to determine convergence by
calculating optimal campaign profit at each
iteration</p></td>
    </tr>
    <tr>
      <th>increment.convergence</th>
      <td><p>granularity level to determine convergence by
calculating optimal campaign profit at each
iteration</p></td>
    </tr>
    <tr>
      <th>m0.train</th>
      <td><p>non-targeted margin scores reordered classic
loss train sample</p></td>
    </tr>
    <tr>
      <th>m1.train</th>
      <td><p>targeted margin scores reordered classic loss train sample</p></td>
    </tr>
    <tr>
      <th>m0.valid</th>
      <td><p>non-targeted margin scores reordered classic loss
validation sample</p></td>
    </tr>
    <tr>
      <th>m1.valid</th>
      <td><p>targeted margin scores reordered classic loss
validation sample</p></td>
    </tr>
    <tr>
      <th>m0.test</th>
      <td><p>non-targeted margin scores reordered classic loss test sample</p></td>
    </tr>
    <tr>
      <th>m1.test</th>
      <td><p>targeted margin scores reordered classic loss test sample</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>verbose output (default: TRUE)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing best iteration of sgb (best.iteration.valid),
scores at best iteration (fmts),
variables' importance (Variable.Importance),
campaign profit at best target size for each iteration of SGB
(maxlift.convergence.valid),
target size at best iteration optimized on valid sample
(targetsize.convergence.valid),
and other SGB outcome measures.</p>
<ul>
<li><p>iterations</p></li>
<li><p>best.iteration.valid</p></li>
<li><p>LogLik</p></li>
<li><p>ytrain</p></li>
<li><p>yv</p></li>
<li><p>yts</p></li>
<li><p>fmt</p></li>
<li><p>fmv</p></li>
<li><p>fmts</p></li>
<li><p>Variable.Importance</p></li>
<li><p>maxlift.convergence.valid</p></li>
<li><p>targetsize.convergence.valid</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function applies the SGB algorithm with a user-defined loss function.
It calibrates the model on a calibration sample and generates predictions
on a validation and test samples.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Aurelie Lemmens.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


